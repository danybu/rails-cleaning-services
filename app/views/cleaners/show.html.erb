<div class="container">

  <!-- under is description and picture -->
  <div class="row cleaner-image">

    <span id="hidden-cleaner-picture"><%=@cleaner.photo_url %></span>
    <div class="col-sm-6">
      <div class="text-center cleaner-info">
        <div class="info-name"> <%= @cleaner.name %></div>
        <div class="info-price"> <strong><%= @cleaner.price %></strong>â‚¬, </div>
        <div class="info-age"> <%= @cleaner.age %> years old</div>
      </div>
    </div>


    <% var = @cleaner.average_rating  %>
    <div class="col-sm-6">
      <div class="text-center cleaner-rating">
        <div class="stars-outer">
          <div class="stars-inner"></div>
        </div>
        <br>
        <small>
          <span id='rating'><%=var%></span> / 5
        </small>
      </div>
    </div>
  </div>

  <div>
    <div class=" text-center cleaner-description">
      " <%= @cleaner.description %>"
    </div>
  </div>




  <!-- book me action button -->
  <div class="row">
    <div class="cleaner-show-all">
      <div class='text-center'>
        <% if user_signed_in? %>
        <%= simple_form_for @booking do |f|  %>
        <%= f.hidden_field :cleaner_id, value: @cleaner.id %>
        <%= f.hidden_field :user_id, value: current_user.id %>
        <div class="date-booking">
         <div class="buttons-div">
          <%= f.text_field :reserved_on, value:"01/01/2018" , class: "form-control input-group-text text-centered" %>

          <div id="before-noon" class="div-button">8 - 12 am</div>
          <div id="after-noon" class="div-button">13 - 17 pm</div>
        </div>
      </div>
      <%= f.button :submit,'BOOK ME', class: "btn btn-lg", id:"cleaner-book-submit" %>
      <%= f.hidden_field :before_noon, value: false %>
      <%= f.hidden_field :after_noon, value: false %>
      <%= f.hidden_field :availabilities, value: @cleaner.availabilities.to_json %>

      <% end %>
    </div>
    <% else %>

    <div class='text-center'>
      <div class="btn btn-primary">
        <%= link_to 'sign in make a reservation', new_user_session_path %>
      </div>
    </div>
    <% end %>
  </div>
</div>

<!-- review section -->
<div class="row">
  <h2>What others thought of <%=@cleaner.name%></h2>

</div>
<div class="row cleaner-show-all ">
  <div class="d-flex flex-column">
    <% @reviews.each do |review| %>
    <div class="review-box">
      <div class="d-flex justify-content-center cleaner-reviews">
        "<%= review.content %>"
      </div>
      <div class="button-notification-star-review">
        <% test = review.rating %>
        <i class="<%= test>0 ? 'fa fa-star checked' : 'fa fa-star' %>"></i>
        <i class="<%= test>1 ? 'fa fa-star checked' : 'fa fa-star' %>"></i>
        <i class="<%= test>2 ? 'fa fa-star checked' : 'fa fa-star' %>"></i>
        <i class="<%= test>3 ? 'fa fa-star checked' : 'fa fa-star' %>"></i>
        <i class="<%= test>4 ? 'fa fa-star checked' : 'fa fa-star' %>"></i>
      </div>
    </div>
    <% end %>
  </div>
</div>
</div>


<script type="text/javascript" src="https://cdn.jsdelivr.net/jquery/latest/jquery.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />


<script>
  $(function() {
    console.log($('input[name="reservation[reserved_on]"]'));
    $('input[name="reservation[reserved_on]"]').daterangepicker({
      startDate:Date.now(),
      endDate: '01/01/2020',
      singleDatePicker: true,
      showDropdowns: true,
      timePicker: false,
      timePicker24Hour: true,
      applyButtonClasses: 'btn btn-primary center',
      cancelButtonClasses: 'btn btn-danger center',
      minDate:Date.now(),
      setStartDate:Date.now(),
      minYear: 1901,
      locale: {
        format: 'DD/MM/YYYY',
      }
    }, function(start, end, label) {
    });
  });
</script>


